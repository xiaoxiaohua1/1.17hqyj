#include "interface.h"
#include "operation.h"

//界面
int do_menu(int sfd)
{
	int choose;
	int ret1 = 0,ret2 = 0,flag =0;
	static char admin = 'S';//管理员验证码

	while(1)
	{
		printf("*************************************************************************************\n");
		printf("*************************************************************************************\n");
		printf("********************************  1---管理员注册　***********************************\n");
		printf("********************************  2---管理员登入　***********************************\n");
		printf("********************************  3---员工登入    ***********************************\n");
		printf("*************************************************************************************\n");
		printf("*************************************************************************************\n");

		printf("请输入选择模式:");
		scanf("%d",&choose);

		switch(choose)
		{
		case 1:
			admin_login(sfd);
			break;
		case 2:
			ret1 = admin_enter(sfd,admin);
			if(ret1 > 0)
			{
				flag = admin_menu(sfd);
			}
			break;
		case 3:
			ret2 = staff_enter(sfd);
			if(ret2 > 0)
			{
				flag = staff_menu(sfd);
			}
			break;
		default:
			printf("输入有误,请重新输入.\n");
			break;
		}
		if(flag == 1)
		{
			return 1;
		}
	}
	return 0;
}
//管理员界面
int admin_menu(int sfd)
{
	int choose;
	while(1)
	{
		printf("*************************************************************************************\n");
		printf("*************************************************************************************\n");
		printf("********************************  1---增加员工信息　*********************************\n");
		printf("********************************  2---删除员工信息  *********************************\n");
		printf("********************************  3---修改员工信息  *********************************\n");
		printf("********************************  4---查询员工信息  *********************************\n");
		printf("********************************  5---查询所有员工信息  *****************************\n");
		printf("********************************  6---退出系统　　  *********************************\n");
		printf("*************************************************************************************\n");
		printf("*************************************************************************************\n");

		printf("请输入选择模式:");
		scanf("%d",&choose);

		switch(choose)
		{
		case 1:
			add_staff_inform(sfd);
			break;
		case 2:
			delete_staff_inform(sfd);
			break;
		case 3:
			 mod_staff_inform(sfd);
			break;
		case 4:
			check_staff_inform(sfd);
			break;
		case 5:
			check_all_staff_inform(sfd);
			break;
		case 6:
			return 1;  
		default:
			printf("输入有误,请重新输入.\n");
			break;
		}
	}
	return 0;
}
//员工界面
int staff_menu(int sfd)
{
	int choose;
	while(1)
	{
		printf("*************************************************************************************\n");
		printf("*************************************************************************************\n");
		printf("********************************  1---查看个人信息　*********************************\n");
		printf("********************************  2---修改个人信息　*********************************\n");
		printf("********************************  3---退出系统　　  *********************************\n");
		printf("*************************************************************************************\n");
		printf("*************************************************************************************\n");

		printf("请输入选择模式:");
		scanf("%d",&choose);

		switch(choose)
		{
		case 1:
			check_personal_inform(sfd);
			break;
		case 2:
			mod_personal_inform(sfd);
			break;
		case 3:
			return 1;
		default:
			printf("输入有误,请重新输入.\n");
			break;
		}
	}
	return 0;
}


